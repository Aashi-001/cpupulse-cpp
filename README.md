implementing cpu pulse in C++ here.